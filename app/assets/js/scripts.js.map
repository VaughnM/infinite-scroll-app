{"version":3,"sources":["_settings.js","displayShots.js","favourite.js","getShots.js","lazyLoad.js","scroll.js","z-main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"scripts.js","sourcesContent":["'use strict';\n\nvar infApp = infApp || {};\n\n(function run() {\n  infApp.settings = {\n    api: {\n      baseUrl: 'https://api.dribbble.com/v1',\n      access_token: '3402bc128ab90bdc0d1ddab729be14c034154ba0fdca8bd1e0d8f230cac3d82c'\n    }\n  };\n}());\n","'use strict';\n\nvar infApp = infApp || {};\n\n(function run() {\n  // creating a HTML template using a json object\n  function prepTemplate(shot) {\n    var t = '';\n    var favourite = infApp.checkIfFavourite(shot.id) ? ' favourite' : '';\n    // serving 2x images only when device pixel ration can handle them\n    var imageUrl = window.devicePixelRatio > 1 && shot.images.hidpi\n                    ? shot.images.hidpi\n                    : shot.images.normal;\n\n    t += '<figure class=\"shot' + favourite + '\" id=\"' + shot.id + '\">' +\n            '<figcaption class=\"shot-overlay\">' +\n              '<div class=\"shot-overlay-text\">' +\n                '<h2 class=\"shot-title\">' +\n                  '<a href=\"' + shot.html_url + '\" target=\"_blank\">' + shot.title + '</a>' +\n                '</h2>' +\n                '<hr>' +\n                '<a class=\"shot-author\" href=\"' + shot.user.html_url + '\" target=\"_blank\">' + shot.user.name + '</a>' +\n                '<span class=\"favourite-heart\"></span>' +\n              '</div>' +\n              '<div class=\"shot-overlay-cta\">' +\n                '<button onclick=\"infApp.favouriteShot(' + shot.id + ')\">Favourite</button>' +\n              '</div>' +\n            '</figcaption>' +\n            '<img data-src=\"' + imageUrl + '\" alt=\"' + shot.title + '\">' +\n          '</figure>';\n\n    return t;\n  }\n\n  infApp.prepTemplate = prepTemplate;\n}());\n","'use strict';\n\nvar infApp = infApp || {};\n\n(function run() {\n  function favouriteShot(shotId) {\n    var storage = window.localStorage;\n    var favourites = storage.getItem('favourites');\n    var newArray = [];\n\n    if (!favourites) {\n      newArray.push(shotId);\n      return storage.setItem('favourites', JSON.stringify(newArray));\n    }\n\n    if (checkIfFavourite(shotId)) {\n      return removeFromFavourites(shotId);\n    }\n\n    newArray = JSON.parse(favourites);\n    newArray.push(shotId);\n    toggleFavouriteCssClass(shotId);\n\n    return storage.setItem('favourites', JSON.stringify(newArray));\n  }\n\n  function checkIfFavourite(shotId) {\n    var storage = window.localStorage;\n    var favourites = storage.getItem('favourites');\n    var favouritesArr;\n    var result = false;\n\n    if (!favourites) { return false; }\n\n    favouritesArr = JSON.parse(favourites);\n\n    favouritesArr.forEach(function forEachLoop(favouriteItem) {\n      if (favouriteItem === shotId) {\n        result = true;\n      }\n    });\n\n    return result;\n  }\n\n  function removeFromFavourites(shotId) {\n    var storage = window.localStorage;\n    var favourites = storage.getItem('favourites');\n    var newArray = JSON.parse(favourites);\n    var index = newArray.indexOf(shotId);\n\n    if (index > -1) {\n      newArray.splice(index, 1);\n      toggleFavouriteCssClass(shotId);\n    }\n\n    return storage.setItem('favourites', JSON.stringify(newArray));\n  }\n\n  function toggleFavouriteCssClass(shotId) {\n    var element = document.getElementById(shotId);\n\n    element.classList.toggle('favourite');\n  }\n\n  infApp.favouriteShot = favouriteShot;\n  infApp.checkIfFavourite = checkIfFavourite;\n}());\n","'use strict';\n\nvar infApp = infApp || {};\n\n(function run() {\n  function getShots(options, successCallback, failureCallback) {\n    var request = new XMLHttpRequest();\n\n    var endPoint = options.endPoint || '/shots/';\n    var page = options.page || '1';\n    var perPage = options.perPage || '10';\n\n    var requestUrl = infApp.settings.api.baseUrl +\n                      endPoint +\n                      '?page=' +\n                      page +\n                      '&per_page=' +\n                      perPage +\n                      '&access_token=' +\n                      infApp.settings.api.access_token;\n\n    request.open('GET', requestUrl, true);\n    toggleMainPreloader();\n\n    request.onload = function onload() {\n      var html = [];\n      var htmlString;\n\n      if (request.status >= 200 && request.status < 400) {\n        infApp.shots = JSON.parse(request.responseText);\n\n        infApp.shots.forEach(function forEachLoop(item) {\n          html.push(infApp.prepTemplate(item));\n        });\n\n        htmlString = html.join('');\n\n        document.getElementById('shots-container').innerHTML += htmlString;\n\n        infApp.pageCount = (infApp.pageCount += 1) || 1;\n        toggleMainPreloader();\n        document.addEventListener('scroll', infApp.addMoreShotsOnScroll, false);\n\n        if (successCallback && typeof successCallback === 'function') {\n          successCallback();\n        }\n      }\n    };\n\n    request.onerror = function onerror() {\n      // There was a connection error of some sort\n      if (failureCallback && typeof failureCallback === 'function') {\n        failureCallback();\n      }\n    };\n\n    request.send();\n  }\n\n  function toggleMainPreloader() {\n    var element = document.getElementById('main-preloader');\n\n    element.classList.toggle('hidden');\n  }\n\n  infApp.getShots = getShots;\n}());\n","'use strict';\n\nvar infApp = infApp || {};\n\n(function run() {\n  function prepLazyLoading() {\n    window.addEventListener('DOMContentLoaded', lazyLoadImages);\n    window.addEventListener('load', lazyLoadImages);\n    window.addEventListener('resize', lazyLoadImages);\n    window.addEventListener('scroll', lazyLoadImages);\n    lazyLoadImages();\n  }\n\n  function lazyLoadImages() {\n    var images = document.querySelectorAll('#shots-container img[data-src]');\n\n    [].forEach.call(images, function forEachLoop(image) {\n      if (isElementInViewport(image)) {\n        image.setAttribute('src', image.getAttribute('data-src'));\n        image.removeAttribute('data-src');\n      }\n    });\n  }\n\n  function isElementInViewport(el) {\n    var rect = el.getBoundingClientRect();\n\n    return (\n        rect.top >= 0 &&\n        rect.left >= 0 &&\n        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n        rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n    );\n  }\n\n  infApp.prepLazyLoading = prepLazyLoading;\n}());\n","'use strict';\n\nvar infApp = infApp || {};\n\n(function run() {\n  function addMoreShotsOnScroll() {\n    var body = document.body;\n    var html = document.documentElement;\n\n    var offset = window.pageYOffset;\n    var iHeight = window.innerHeight;\n    var wHeight = Math.max( body.scrollHeight, body.offsetHeight,\n                       html.clientHeight, html.scrollHeight, html.offsetHeight );\n\n    // adding min offset to prevent double loading\n    if (offset + iHeight === wHeight) {\n      infApp.getShots({ page: infApp.pageCount + 1 });\n\n      // remove listener to prevent adding the same shots twice\n      document.removeEventListener('scroll', infApp.addMoreShotsOnScroll, false);\n    }\n  }\n\n  infApp.addMoreShotsOnScroll = addMoreShotsOnScroll;\n\n  // initial listener\n  document.addEventListener('scroll', infApp.addMoreShotsOnScroll, false);\n}());\n","'use strict';\n\nvar infApp = infApp || {};\n\n\n(function run() {\n  infApp.init = function init() {\n    var axajOptions = {\n      page: 1\n    };\n    var successCallback = function successCallback() {\n      infApp.prepLazyLoading();\n      infApp.addMoreShotsOnScroll();\n    };\n\n    infApp.getShots(axajOptions, successCallback);\n  };\n\n  // document.ready function\n  if (document.readyState !== 'loading') {\n    infApp.init();\n  } else {\n    document.addEventListener('DOMContentLoaded', infApp.init());\n  }\n}());\n\n"],"sourceRoot":"/source/"}